"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.withdrawAll = withdrawAll;
const web3_js_1 = require("@solana/web3.js");
const manifest_sdk_1 = require("@cks-systems/manifest-sdk");
/**
 * Withdraws all funds from Manifest
 * @param agent SolanaAgentKit instance
 * @param marketId Public key for the manifest market
 * @returns Transaction signature
 */
async function withdrawAll(agent, marketId) {
    try {
        const mfxClient = await manifest_sdk_1.ManifestClient.getClientForMarket(agent.connection, marketId, agent.wallet);
        const withdrawAllIx = await mfxClient.withdrawAllIx();
        const signature = await (0, web3_js_1.sendAndConfirmTransaction)(agent.connection, new web3_js_1.Transaction().add(...withdrawAllIx), [agent.wallet]);
        return signature;
    }
    catch (error) {
        throw new Error(`Withdraw all failed: ${error.message}`);
    }
}
//# sourceMappingURL=withdraw_all.js.map